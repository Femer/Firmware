#include "mpc_test_data.h"


#if TEST_MPC == 1

float yawRateMPC[] = {-0.066801f,-0.165368f,-0.277855f,-0.401578f,-0.534275f,-0.673855f,-0.803356f,-0.911337f,-0.998326f,-1.067636f,-1.122057f,-1.161124f,-1.183734f,-1.190189f,-1.181709f,-1.160054f,-1.127244f,-1.085365f,-1.036443f,-0.982361f,-0.924814f,-0.865284f,-0.805034f,-0.745117f,-0.686385f,-0.629509f,-0.574998f,-0.523222f,-0.474430f,-0.428770f,-0.386307f,-0.347039f,-0.310910f,-0.277822f,-0.247649f,-0.220242f,-0.195437f,-0.173062f,-0.152943f,-0.134906f,-0.118779f,-0.104398f,-0.091604f,-0.080250f,-0.070194f,-0.061307f,-0.053469f,-0.046569f,-0.040505f,-0.035186f,-0.030527f,-0.026454f,-0.022897f,-0.019796f,-0.017097f,-0.014750f,-0.012712f,-0.010945f,-0.009414f,-0.008090f,-0.006946f,-0.005958f,-0.005107f,-0.004373f,-0.003742f,-0.003200f,-0.002734f,-0.002334f,-0.001991f,-0.001698f,-0.001446f,-0.001231f,-0.001048f,-0.000891f,-0.000757f,-0.000643f,-0.000546f,-0.000463f,-0.000393f,-0.000333f,-0.000282f,-0.000239f,-0.000203f,-0.000171f,-0.000145f,-0.000123f,-0.000104f,-0.000088f,-0.000074f,-0.000063f,-0.000053f,-0.000045f,-0.000038f,-0.000032f,-0.000027f,-0.000023f,-0.000019f,-0.000016f,-0.000014f,-0.000012f,-0.000010f,-0.000008f,-0.000007f,-0.000006f,-0.000005f,-0.000004f,-0.000004f,-0.000003f,-0.000003f,-0.000002f,-0.000002f,-0.000002f,-0.000001f,-0.000001f,-0.000001f,-0.000001f,-0.000001f,-0.000001f,-0.000000f,-0.000000f,-0.000000f,-0.000000f,-0.000000f,-0.000000f,-0.000000f,-0.000000f,-0.000000f,-0.000000f,-0.000000f,-0.000000f,-0.000000f,-0.000000f,-0.000000f,-0.000000f,-0.000000f,-0.000000f,-0.000000f,-0.000000f,-0.000000f,-0.000000f,-0.000000f,-0.000000f,-0.000000f,-0.000000f,-0.000000f,-0.000000f,-0.000000f,-0.000000f,-0.000000f,-0.000000f,-0.000000f,-0.000000f,-0.000000f,-0.000000f,-0.000000f,-0.000000f,-0.000000f,-0.000000f,-0.000000f,-0.000000f,-0.000000f,-0.000000f,-0.000000f,-0.000000f,-0.000000f,-0.000000f,-0.000000f,-0.000000f,-0.000000f,-0.000000f,-0.000000f,-0.000000f,-0.000000f,-0.000000f,-0.000000f,-0.000000f,-0.000000f};
float yawMPC[] = {1.568272f,1.560511f,1.546742f,1.526249f,1.498461f,1.462931f,1.419751f,1.369824f,1.314368f,1.254491f,1.191126f,1.125137f,1.057435f,0.988949f,0.920568f,0.853093f,0.787219f,0.723521f,0.662458f,0.604377f,0.549522f,0.498045f,0.450023f,0.405463f,0.364321f,0.326507f,0.291898f,0.260347f,0.231688f,0.205745f,0.182336f,0.161275f,0.142381f,0.125476f,0.110389f,0.096956f,0.085022f,0.074444f,0.065085f,0.056823f,0.049542f,0.043136f,0.037511f,0.032579f,0.028261f,0.024487f,0.021194f,0.018323f,0.015825f,0.013653f,0.011767f,0.010132f,0.008716f,0.007492f,0.006433f,0.005519f,0.004732f,0.004053f,0.003469f,0.002967f,0.002535f,0.002165f,0.001848f,0.001576f,0.001343f,0.001144f,0.000974f,0.000828f,0.000704f,0.000599f,0.000508f,0.000432f,0.000366f,0.000311f,0.000263f,0.000223f,0.000189f,0.000160f,0.000136f,0.000115f,0.000097f,0.000082f,0.000069f,0.000059f,0.000050f,0.000042f,0.000035f,0.000030f,0.000025f,0.000021f,0.000018f,0.000015f,0.000013f,0.000011f,0.000009f,0.000008f,0.000007f,0.000006f,0.000005f,0.000004f,0.000003f,0.000003f,0.000002f,0.000002f,0.000002f,0.000001f,0.000001f,0.000001f,0.000001f,0.000001f,0.000001f,0.000001f,0.000000f,0.000000f,0.000000f,0.000000f,0.000000f,0.000000f,0.000000f,0.000000f,0.000000f,0.000000f,0.000000f,0.000000f,0.000000f,0.000000f,0.000000f,0.000000f,0.000000f,0.000000f,0.000000f,0.000000f,0.000000f,0.000000f,0.000000f,0.000000f,0.000000f,0.000000f,0.000000f,0.000000f,0.000000f,0.000000f,0.000000f,0.000000f,0.000000f,0.000000f,0.000000f,0.000000f,0.000000f,0.000000f,0.000000f,0.000000f,0.000000f,0.000000f,0.000000f,0.000000f,0.000000f,0.000000f,0.000000f,0.000000f,0.000000f,0.000000f,0.000000f,0.000000f,0.000000f,0.000000f,0.000000f,0.000000f,0.000000f,0.000000f,0.000000f,0.000000f,0.000000f,0.000000f,0.000000f,0.000000f,0.000000f};
int yawLength = 177;
static int index_data_mpc = 0;
float h[] = {20.000000f,1.000000f,3.000000f,1.000000f};
float h_final[][3] = {{5.246395f,11.039812f,-2.200634f},
 {11.039812f,68.000489f,-6.358405f},
 {-2.200634f,-6.358405f,6.426127f}};
float lb[] = {-0.179062f,-1.000000f};
float ub[] = {0.179062f,1.000000f};
float A[][2] = {{0.841644f,-0.007050f}, {0.040424f,0.999481f}};
float B[] = {-0.167470f,-0.008020f};
int32_t mpc_sampling_time_us = 49740;
int32_t pred_horz_steps = 30;
float delta[] = {0.174533f,0.174533f, 0.100000f};
float min_time_s = 2.000000f;
float safety_time_stop_tack_s = 320.000000f;
float correctRud[177] = {0.179064f,0.358128f,0.537190f,0.716253f,0.894228f,0.983816f,0.999992f,0.999997f,0.999998f,0.999905f,0.983521f,0.946462f,0.895462f,0.835808f,0.771555f,0.705686f,0.640368f,0.577140f,0.517046f,0.460750f,0.408628f,0.360838f,0.317383f,0.278149f,0.242947f,0.211537f,0.183647f,0.158994f,0.137290f,0.118254f,0.101615f,0.087117f,0.074524f,0.063615f,0.054191f,0.046070f,0.039089f,0.033101f,0.027978f,0.023603f,0.019876f,0.016706f,0.014016f,0.011738f,0.009812f,0.008187f,0.006819f,0.005668f,0.004703f,0.003895f,0.003219f,0.002655f,0.002186f,0.001796f,0.001472f,0.001204f,0.000982f,0.000800f,0.000649f,0.000526f,0.000425f,0.000342f,0.000275f,0.000220f,0.000175f,0.000139f,0.000110f,0.000087f,0.000068f,0.000053f,0.000041f,0.000032f,0.000024f,0.000018f,0.000014f,0.000010f,0.000007f,0.000005f,0.000004f,0.000002f,0.000002f,0.000001f,0.000000f,0.000000f,-0.000000f,-0.000000f,-0.000000f,-0.000000f,-0.000000f,-0.000000f,-0.000000f,-0.000000f,-0.000000f,-0.000000f,-0.000000f,-0.000000f,-0.000000f,-0.000000f,-0.000000f,-0.000000f,-0.000000f,-0.000000f,-0.000000f,-0.000000f,-0.000000f,-0.000000f,-0.000000f,0.000000f,0.000000f,0.000000f,0.000000f,0.000000f,0.000000f,0.000000f,0.000000f,0.000000f,0.000000f,0.000000f,0.000000f,0.000000f,0.000000f,0.000000f,0.000000f,0.000000f,0.000000f,0.000000f,0.000000f,0.000000f,0.000000f,0.000000f,0.000000f,0.000000f,0.000000f,0.000000f,0.000000f,0.000000f,0.000000f,0.000000f,0.000000f,0.000000f,0.000000f,0.000000f,0.000000f,0.000000f,0.000000f,0.000000f,0.000000f,0.000000f,0.000000f,0.000000f,0.000000f,0.000000f,0.000000f,0.000000f,0.000000f,0.000000f,0.000000f,0.000000f,0.000000f,0.000000f,0.000000f,0.000000f,0.000000f,0.000000f,0.000000f,0.000000f,0.000000f,0.000000f,0.000000f,0.000000f,0.000000f,0.000000f,0.000000f,0.000000f,0.000000f,0.000000f,0.000000f};


void mt_init_mpc_data(void){

    set_mpc_data(h, lb, ub, h_final,
                 mpc_sampling_time_us, A, B,
                 pred_horz_steps);


    set_band_data(delta, min_time_s, safety_time_stop_tack_s);
}

void mt_get_next_yr_y(float x[3]){
    x[0] = yawRateMPC[index_data_mpc];
    x[1] = yawMPC[index_data_mpc];

    index_data_mpc++;
//    if(index_data_mpc >= yawLength)
//        index_data_mpc = yawLength;
}

bool mt_still_data(void){
    if(index_data_mpc >= yawLength)
        return false;
    else
        return true;
}

float mt_get_correct_rud(void){
    return correctRud[index_data_mpc-1];
}

#endif
